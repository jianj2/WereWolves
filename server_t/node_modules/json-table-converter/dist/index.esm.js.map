{"version":3,"file":"index.esm.js","sources":["../src/utils/is-object.js","../src/lib/object-to-array.js","../src/lib/table-to-html.js","../src/lib/array-to-table.js","../src/index.js"],"sourcesContent":["function isObject (obj) {\n  return Object.prototype.toString.call(obj) === '[object Object]'\n}\n\nmodule.exports = isObject\n","const isObject = require('../utils/is-object')\n\nfunction objectToArray (json) {\n  if (isObject(json)) {\n    let arr = []\n    for (let key in json) {\n      arr.push({ $_key: key, $_value: objectToArray(json[key]) })\n    }\n    return arr\n  } else if (Array.isArray(json)) {\n    let arr = []\n    for (let item of json) {\n      if (isObject(json)) {\n        arr.push(objectToArray(json))\n      } else {\n        arr.push(item)\n      }\n    }\n    return arr\n  }\n  return json\n}\n\nmodule.exports = objectToArray\n","const isObject = require('../utils/is-object')\n\nconst defaultTableStyle = 'border-spacing: 0 0; border-color: #808080; border-collapse: collapse;'\nconst defaultTdStyle = 'border: 1px solid #2d2d2d; padding: 3px;'\nconst defaultTdKeyStyle = 'background: #F6F4F0; ' + defaultTdStyle\nconst defaultThStyle = 'background: #F6F4F0;' + defaultTdStyle\nconst defaultTrStyle = ''\n\nfunction getTableStyle(tableStyle, tableDepth) {\n  return `${tableDepth > 1 ? 'width: 100%;' : ''}${tableStyle}`.replace(/\\n\\s*/g, '')\n}\n\nfunction getTdStyle (tdStyle, tdKeyStyle, isKey) {\n  return `${isKey ? tdKeyStyle : ''}${tdStyle}`.replace(/\\n\\s*/g, '')\n}\n\nfunction getThStyle (thStyle) {\n  return `${thStyle}`.replace(/\\n\\s*/g, '')\n}\n\nfunction tableToHtml (fields, rows, tableDepth, {\n  tableStyle = defaultTableStyle,\n  trStyle = defaultTrStyle,\n  thStyle = defaultThStyle,\n  tdKeyStyle = defaultTdKeyStyle,\n  tdStyle = defaultTdStyle\n} = {}) {\n  return `<table cellspacing=\"0\" style=\"${getTableStyle(tableStyle, tableDepth)}\">\n  <thead>${fields\n    .filter(f => !f.startsWith('$_'))\n    .map(f => `<th style=\"${getThStyle(thStyle)}\">${f}</th>`)\n    .join('')}</thead>\n  <tbody>${rows\n    .map(row => {\n      let tds = ''\n      for (let i = 0; i < row.length; i++) {\n        const v = row[i] || ''\n        if (isObject(v)) {\n          tds += `<td style=\"${getTdStyle(tdStyle, tdKeyStyle, v.isKey)}\">${\n            v.value\n          }</td>`\n        } else {\n          tds += `<td style=\"${getTdStyle(tdStyle)}\">${v}</td>`\n        }\n      }\n      return `<tr style=\"${trStyle}\">${tds}</tr>`\n    })\n    .join('')}</tbody>\n</table>`\n}\n\nmodule.exports = tableToHtml\n","const isObject = require('../utils/is-object')\nconst objectToArray = require('./object-to-array')\nconst tableToHtml = require('./table-to-html')\n\nfunction arrayToTable (array, options) {\n  function _recur(arr, tableDepth = 1) {\n    let fieldSet = new Set()\n    for (let i = 0; i < arr.length; i++) {\n      const item = arr[i]\n      if (isObject(item)) {\n        Object.keys(item).forEach(i => fieldSet.add(i))\n      } else if (Array.isArray(item)) {\n        return _recur(item, tableDepth + 1)\n      }\n    }\n    \n    let fields = Array.from(fieldSet)\n    let rows = arr.map(() => [])\n    for (let i = 0; i < arr.length; i++) {\n      const item = arr[i]\n      if (isObject(item)) {\n        for (let j = 0; j < fields.length; j++) {\n          let value = item[fields[j]]\n          if (Array.isArray(value)) {\n            rows[i][j] = _recur(value, tableDepth + 1)\n          } else if (isObject(value)) {\n            rows[i][j] = _recur(objectToArray(value), tableDepth + 1)\n          } else {\n            rows[i][j] = { isKey: fields[j] === '$_key', value }\n          }\n        }\n      } else {\n        rows[i][fields.length] = { isKey: false, value: item }\n      }\n    }\n    \n    return tableToHtml(fields, rows, tableDepth, options)\n  }\n\n  return _recur(array)\n}\n\nmodule.exports = arrayToTable","const objectToArray = require('./lib/object-to-array')\nconst arrayToTable = require('./lib/array-to-table')\nconst isObject = require('./utils/is-object')\n\n/**\n * Convert Json to <table />\n * \n * @param {Object|Array} json\n * @param {Object} options\n * @param {String} [options.tableStyle] <table/> Style\n * @param {String} [options.trStyle] <tr/> Style\n * @param {String} [options.thStyle] <th/> Style\n * @param {String} [options.tdStyle] <td/> Style\n * @param {String} [options.tdKeyStyle] <td/> Key Style\n */\nfunction jsonToTableHtmlString (json, options) {\n  let arr = isObject(json) ? objectToArray(json) : json\n\n  if (!Array.isArray(arr)) {\n    arr = []\n  }\n\n  return arrayToTable(arr, options)\n}\n\nmodule.exports = {\n  jsonToTableHtmlString,\n}\n\n"],"names":["isObject","objectToArray","tableToHtml","arrayToTable"],"mappings":"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"}