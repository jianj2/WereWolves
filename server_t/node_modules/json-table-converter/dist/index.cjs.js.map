{"version":3,"file":"index.cjs.js","sources":["../src/utils/is-object.js","../src/lib/object-to-array.js","../src/lib/table-to-html.js","../src/lib/array-to-table.js","../src/index.js"],"sourcesContent":["function isObject (obj) {\n  return Object.prototype.toString.call(obj) === '[object Object]'\n}\n\nmodule.exports = isObject\n","const isObject = require('../utils/is-object')\n\nfunction objectToArray (json) {\n  if (isObject(json)) {\n    let arr = []\n    for (let key in json) {\n      arr.push({ $_key: key, $_value: objectToArray(json[key]) })\n    }\n    return arr\n  } else if (Array.isArray(json)) {\n    let arr = []\n    for (let item of json) {\n      if (isObject(json)) {\n        arr.push(objectToArray(json))\n      } else {\n        arr.push(item)\n      }\n    }\n    return arr\n  }\n  return json\n}\n\nmodule.exports = objectToArray\n","const isObject = require('../utils/is-object')\n\nconst defaultTableStyle = 'border-spacing: 0 0; border-color: #808080; border-collapse: collapse;'\nconst defaultTdStyle = 'border: 1px solid #2d2d2d; padding: 3px;'\nconst defaultTdKeyStyle = 'background: #F6F4F0; ' + defaultTdStyle\nconst defaultThStyle = 'background: #F6F4F0;' + defaultTdStyle\nconst defaultTrStyle = ''\n\nfunction getTableStyle(tableStyle, tableDepth) {\n  return `${tableDepth > 1 ? 'width: 100%;' : ''}${tableStyle}`.replace(/\\n\\s*/g, '')\n}\n\nfunction getTdStyle (tdStyle, tdKeyStyle, isKey) {\n  return `${isKey ? tdKeyStyle : ''}${tdStyle}`.replace(/\\n\\s*/g, '')\n}\n\nfunction getThStyle (thStyle) {\n  return `${thStyle}`.replace(/\\n\\s*/g, '')\n}\n\nfunction tableToHtml (fields, rows, tableDepth, {\n  tableStyle = defaultTableStyle,\n  trStyle = defaultTrStyle,\n  thStyle = defaultThStyle,\n  tdKeyStyle = defaultTdKeyStyle,\n  tdStyle = defaultTdStyle\n} = {}) {\n  return `<table cellspacing=\"0\" style=\"${getTableStyle(tableStyle, tableDepth)}\">\n  <thead>${fields\n    .filter(f => !f.startsWith('$_'))\n    .map(f => `<th style=\"${getThStyle(thStyle)}\">${f}</th>`)\n    .join('')}</thead>\n  <tbody>${rows\n    .map(row => {\n      let tds = ''\n      for (let i = 0; i < row.length; i++) {\n        const v = row[i] || ''\n        if (isObject(v)) {\n          tds += `<td style=\"${getTdStyle(tdStyle, tdKeyStyle, v.isKey)}\">${\n            v.value\n          }</td>`\n        } else {\n          tds += `<td style=\"${getTdStyle(tdStyle)}\">${v}</td>`\n        }\n      }\n      return `<tr style=\"${trStyle}\">${tds}</tr>`\n    })\n    .join('')}</tbody>\n</table>`\n}\n\nmodule.exports = tableToHtml\n","const isObject = require('../utils/is-object')\nconst objectToArray = require('./object-to-array')\nconst tableToHtml = require('./table-to-html')\n\nfunction arrayToTable (array, options) {\n  function _recur(arr, tableDepth = 1) {\n    let fieldSet = new Set()\n    for (let i = 0; i < arr.length; i++) {\n      const item = arr[i]\n      if (isObject(item)) {\n        Object.keys(item).forEach(i => fieldSet.add(i))\n      } else if (Array.isArray(item)) {\n        return _recur(item, tableDepth + 1)\n      }\n    }\n    \n    let fields = Array.from(fieldSet)\n    let rows = arr.map(() => [])\n    for (let i = 0; i < arr.length; i++) {\n      const item = arr[i]\n      if (isObject(item)) {\n        for (let j = 0; j < fields.length; j++) {\n          let value = item[fields[j]]\n          if (Array.isArray(value)) {\n            rows[i][j] = _recur(value, tableDepth + 1)\n          } else if (isObject(value)) {\n            rows[i][j] = _recur(objectToArray(value), tableDepth + 1)\n          } else {\n            rows[i][j] = { isKey: fields[j] === '$_key', value }\n          }\n        }\n      } else {\n        rows[i][fields.length] = { isKey: false, value: item }\n      }\n    }\n    \n    return tableToHtml(fields, rows, tableDepth, options)\n  }\n\n  return _recur(array)\n}\n\nmodule.exports = arrayToTable","const objectToArray = require('./lib/object-to-array')\nconst arrayToTable = require('./lib/array-to-table')\nconst isObject = require('./utils/is-object')\n\n/**\n * Convert Json to <table />\n * \n * @param {Object|Array} json\n * @param {Object} options\n * @param {String} [options.tableStyle] <table/> Style\n * @param {String} [options.trStyle] <tr/> Style\n * @param {String} [options.thStyle] <th/> Style\n * @param {String} [options.tdStyle] <td/> Style\n * @param {String} [options.tdKeyStyle] <td/> Key Style\n */\nfunction jsonToTableHtmlString (json, options) {\n  let arr = isObject(json) ? objectToArray(json) : json\n\n  if (!Array.isArray(arr)) {\n    arr = []\n  }\n\n  return arrayToTable(arr, options)\n}\n\nmodule.exports = {\n  jsonToTableHtmlString,\n}\n\n"],"names":["isObject","obj","Object","prototype","toString","call","objectToArray","json","arr","key","push","$_key","$_value","Array","isArray","item","defaultTableStyle","defaultTdStyle","defaultTdKeyStyle","defaultThStyle","defaultTrStyle","getTableStyle","tableStyle","tableDepth","replace","getTdStyle","tdStyle","tdKeyStyle","isKey","getThStyle","thStyle","tableToHtml","fields","rows","trStyle","filter","f","startsWith","map","join","row","tds","i","length","v","value","arrayToTable","array","options","_recur","fieldSet","Set","keys","forEach","add","from","j","jsonToTableHtmlString"],"mappings":"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"}