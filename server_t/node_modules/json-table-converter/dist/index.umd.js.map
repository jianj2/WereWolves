{"version":3,"file":"index.umd.js","sources":["../src/utils/is-object.js","../src/lib/object-to-array.js","../src/lib/table-to-html.js","../src/lib/array-to-table.js","../src/index.js"],"sourcesContent":["function isObject (obj) {\n  return Object.prototype.toString.call(obj) === '[object Object]'\n}\n\nmodule.exports = isObject\n","const isObject = require('../utils/is-object')\n\nfunction objectToArray (json) {\n  if (isObject(json)) {\n    let arr = []\n    for (let key in json) {\n      arr.push({ $_key: key, $_value: objectToArray(json[key]) })\n    }\n    return arr\n  } else if (Array.isArray(json)) {\n    let arr = []\n    for (let item of json) {\n      if (isObject(json)) {\n        arr.push(objectToArray(json))\n      } else {\n        arr.push(item)\n      }\n    }\n    return arr\n  }\n  return json\n}\n\nmodule.exports = objectToArray\n","const isObject = require('../utils/is-object')\n\nconst defaultTableStyle = 'border-spacing: 0 0; border-color: #808080; border-collapse: collapse;'\nconst defaultTdStyle = 'border: 1px solid #2d2d2d; padding: 3px;'\nconst defaultTdKeyStyle = 'background: #F6F4F0; ' + defaultTdStyle\nconst defaultThStyle = 'background: #F6F4F0;' + defaultTdStyle\nconst defaultTrStyle = ''\n\nfunction getTableStyle(tableStyle, tableDepth) {\n  return `${tableDepth > 1 ? 'width: 100%;' : ''}${tableStyle}`.replace(/\\n\\s*/g, '')\n}\n\nfunction getTdStyle (tdStyle, tdKeyStyle, isKey) {\n  return `${isKey ? tdKeyStyle : ''}${tdStyle}`.replace(/\\n\\s*/g, '')\n}\n\nfunction getThStyle (thStyle) {\n  return `${thStyle}`.replace(/\\n\\s*/g, '')\n}\n\nfunction tableToHtml (fields, rows, tableDepth, {\n  tableStyle = defaultTableStyle,\n  trStyle = defaultTrStyle,\n  thStyle = defaultThStyle,\n  tdKeyStyle = defaultTdKeyStyle,\n  tdStyle = defaultTdStyle\n} = {}) {\n  return `<table cellspacing=\"0\" style=\"${getTableStyle(tableStyle, tableDepth)}\">\n  <thead>${fields\n    .filter(f => !f.startsWith('$_'))\n    .map(f => `<th style=\"${getThStyle(thStyle)}\">${f}</th>`)\n    .join('')}</thead>\n  <tbody>${rows\n    .map(row => {\n      let tds = ''\n      for (let i = 0; i < row.length; i++) {\n        const v = row[i] || ''\n        if (isObject(v)) {\n          tds += `<td style=\"${getTdStyle(tdStyle, tdKeyStyle, v.isKey)}\">${\n            v.value\n          }</td>`\n        } else {\n          tds += `<td style=\"${getTdStyle(tdStyle)}\">${v}</td>`\n        }\n      }\n      return `<tr style=\"${trStyle}\">${tds}</tr>`\n    })\n    .join('')}</tbody>\n</table>`\n}\n\nmodule.exports = tableToHtml\n","const isObject = require('../utils/is-object')\nconst objectToArray = require('./object-to-array')\nconst tableToHtml = require('./table-to-html')\n\nfunction arrayToTable (array, options) {\n  function _recur(arr, tableDepth = 1) {\n    let fieldSet = new Set()\n    for (let i = 0; i < arr.length; i++) {\n      const item = arr[i]\n      if (isObject(item)) {\n        Object.keys(item).forEach(i => fieldSet.add(i))\n      } else if (Array.isArray(item)) {\n        return _recur(item, tableDepth + 1)\n      }\n    }\n    \n    let fields = Array.from(fieldSet)\n    let rows = arr.map(() => [])\n    for (let i = 0; i < arr.length; i++) {\n      const item = arr[i]\n      if (isObject(item)) {\n        for (let j = 0; j < fields.length; j++) {\n          let value = item[fields[j]]\n          if (Array.isArray(value)) {\n            rows[i][j] = _recur(value, tableDepth + 1)\n          } else if (isObject(value)) {\n            rows[i][j] = _recur(objectToArray(value), tableDepth + 1)\n          } else {\n            rows[i][j] = { isKey: fields[j] === '$_key', value }\n          }\n        }\n      } else {\n        rows[i][fields.length] = { isKey: false, value: item }\n      }\n    }\n    \n    return tableToHtml(fields, rows, tableDepth, options)\n  }\n\n  return _recur(array)\n}\n\nmodule.exports = arrayToTable","const objectToArray = require('./lib/object-to-array')\nconst arrayToTable = require('./lib/array-to-table')\nconst isObject = require('./utils/is-object')\n\n/**\n * Convert Json to <table />\n * \n * @param {Object|Array} json\n * @param {Object} options\n * @param {String} [options.tableStyle] <table/> Style\n * @param {String} [options.trStyle] <tr/> Style\n * @param {String} [options.thStyle] <th/> Style\n * @param {String} [options.tdStyle] <td/> Style\n * @param {String} [options.tdKeyStyle] <td/> Key Style\n */\nfunction jsonToTableHtmlString (json, options) {\n  let arr = isObject(json) ? objectToArray(json) : json\n\n  if (!Array.isArray(arr)) {\n    arr = []\n  }\n\n  return arrayToTable(arr, options)\n}\n\nmodule.exports = {\n  jsonToTableHtmlString,\n}\n\n"],"names":["isObject","obj","Object","prototype","toString","call","objectToArray","json","arr","key","push","$_key","$_value","Array","isArray","item","defaultTableStyle","defaultTdStyle","defaultTdKeyStyle","defaultThStyle","defaultTrStyle","getTableStyle","tableStyle","tableDepth","replace","getTdStyle","tdStyle","tdKeyStyle","isKey","getThStyle","thStyle","tableToHtml","fields","rows","trStyle","filter","f","startsWith","map","join","row","tds","i","length","v","value","arrayToTable","array","options","_recur","fieldSet","Set","keys","forEach","add","from","j","jsonToTableHtmlString"],"mappings":"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"}